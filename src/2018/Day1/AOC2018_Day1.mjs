// Generated by ReScript, PLEASE EDIT WITH CARE

import * as Belt_MapInt from "rescript/lib/es6/Belt_MapInt.js";
import * as Stdlib__Array from "@dsiu/rescript-stdlib-fp/src/Stdlib__Array.mjs";
import * as AOC2018_Day1_Data$AdventOfCode from "./AOC2018_Day1_Data.mjs";

function sum(x, y) {
  return x + y | 0;
}

let part1 = Stdlib__Array.reduce(AOC2018_Day1_Data$AdventOfCode.data, 0, sum);

let init = {
  sum: 0,
  countMap: undefined,
  found: undefined
};

function reducer(r, x) {
  let countMap = r.countMap;
  let new_sum = r.sum + x | 0;
  let y = Belt_MapInt.get(countMap, new_sum);
  let countVal = y !== undefined ? y + 1 | 0 : 1;
  let match = r.found;
  let foundVal = match !== undefined ? match : (
      countVal !== 2 ? undefined : new_sum
    );
  return {
    sum: new_sum,
    countMap: Belt_MapInt.set(countMap, new_sum, countVal),
    found: foundVal
  };
}

function solve_part2(xs, _init, reducer) {
  while (true) {
    let init = _init;
    let result = Stdlib__Array.reduce(xs, init, reducer);
    let match = result.found;
    if (match !== undefined) {
      return result;
    }
    _init = result;
    continue;
  };
}

function runDay1Part2(__x) {
  return solve_part2(__x, init, reducer);
}

let part2_result = solve_part2(AOC2018_Day1_Data$AdventOfCode.data, init, reducer);

let $$Map;

export {
  $$Map,
  sum,
  part1,
  init,
  reducer,
  solve_part2,
  runDay1Part2,
  part2_result,
}
/* part1 Not a pure module */
